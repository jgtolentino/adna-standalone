{
  "dashboard_title": "TBWA Agency Overview",
  "slug": "tbwa-agency-overview",
  "description": "High-level agency performance metrics including store performance, brand metrics, and transaction trends",
  "certified_by": "TBWA Analytics Team",
  "certification_details": "Production-ready dashboard for executive stakeholders",
  "published": true,
  "css": "",
  "json_metadata": {
    "timed_refresh_immune_slices": [],
    "expanded_slices": {},
    "refresh_frequency": 300,
    "default_filters": "{}",
    "color_scheme": "supersetColors",
    "label_colors": {
      "TBWA Client": "#FFD100",
      "Non-Client": "#666666",
      "Premium": "#1f77b4",
      "Standard": "#2ca02c",
      "Value": "#ff7f0e"
    },
    "shared_label_colors": {},
    "color_scheme_domain": [],
    "cross_filters_enabled": true,
    "native_filter_configuration": [
      {
        "id": "filter_date_range",
        "name": "Date Range",
        "filterType": "filter_time",
        "targets": [
          {"datasetId": 1, "column": {"name": "transaction_date"}}
        ],
        "defaultDataMask": {
          "filterState": {
            "value": "Last 90 days"
          }
        },
        "cascadeParentIds": [],
        "scope": {"rootPath": ["ROOT_ID"], "excluded": []},
        "isInstant": true,
        "controlValues": {
          "enableEmptyFilter": false
        }
      },
      {
        "id": "filter_region",
        "name": "Region",
        "filterType": "filter_select",
        "targets": [
          {"datasetId": 1, "column": {"name": "region"}}
        ],
        "defaultDataMask": {
          "filterState": {}
        },
        "cascadeParentIds": [],
        "scope": {"rootPath": ["ROOT_ID"], "excluded": []},
        "isInstant": true,
        "controlValues": {
          "enableEmptyFilter": true,
          "multiSelect": true
        }
      },
      {
        "id": "filter_city",
        "name": "City",
        "filterType": "filter_select",
        "targets": [
          {"datasetId": 1, "column": {"name": "city"}}
        ],
        "defaultDataMask": {
          "filterState": {}
        },
        "cascadeParentIds": ["filter_region"],
        "scope": {"rootPath": ["ROOT_ID"], "excluded": []},
        "isInstant": true,
        "controlValues": {
          "enableEmptyFilter": true,
          "multiSelect": true
        }
      },
      {
        "id": "filter_brand_tier",
        "name": "Brand Tier",
        "filterType": "filter_select",
        "targets": [
          {"datasetId": 2, "column": {"name": "brand_tier"}}
        ],
        "defaultDataMask": {
          "filterState": {}
        },
        "cascadeParentIds": [],
        "scope": {"rootPath": ["ROOT_ID"], "excluded": []},
        "isInstant": true,
        "controlValues": {
          "enableEmptyFilter": true,
          "multiSelect": true
        }
      },
      {
        "id": "filter_tbwa_client",
        "name": "TBWA Client",
        "filterType": "filter_select",
        "targets": [
          {"datasetId": 2, "column": {"name": "is_tbwa_client"}}
        ],
        "defaultDataMask": {
          "filterState": {}
        },
        "cascadeParentIds": [],
        "scope": {"rootPath": ["ROOT_ID"], "excluded": []},
        "isInstant": true,
        "controlValues": {
          "enableEmptyFilter": true
        }
      }
    ]
  },
  "position_json": {
    "HEADER_ID": {
      "id": "HEADER_ID",
      "type": "HEADER",
      "meta": {"text": "TBWA Agency Overview"}
    },
    "ROOT_ID": {"type": "ROOT", "id": "ROOT_ID", "children": ["GRID_ID"]},
    "GRID_ID": {
      "type": "GRID",
      "id": "GRID_ID",
      "children": ["ROW-kpi", "ROW-charts-1", "ROW-charts-2"],
      "parents": ["ROOT_ID"]
    },
    "ROW-kpi": {
      "type": "ROW",
      "id": "ROW-kpi",
      "children": ["CHART-kpi-transactions", "CHART-kpi-revenue", "CHART-kpi-stores", "CHART-kpi-brands"],
      "parents": ["ROOT_ID", "GRID_ID"],
      "meta": {"background": "BACKGROUND_TRANSPARENT"}
    },
    "ROW-charts-1": {
      "type": "ROW",
      "id": "ROW-charts-1",
      "children": ["CHART-revenue-trend", "CHART-stores-by-region"],
      "parents": ["ROOT_ID", "GRID_ID"],
      "meta": {"background": "BACKGROUND_TRANSPARENT"}
    },
    "ROW-charts-2": {
      "type": "ROW",
      "id": "ROW-charts-2",
      "children": ["CHART-brand-performance", "CHART-brand-treemap"],
      "parents": ["ROOT_ID", "GRID_ID"],
      "meta": {"background": "BACKGROUND_TRANSPARENT"}
    }
  },
  "charts": [
    {
      "slice_name": "Total Transactions",
      "viz_type": "big_number_total",
      "description": "Total transaction count in the selected period",
      "params": {
        "datasource": "analytics.vw_daily_transactions",
        "metric": {"expressionType": "SQL", "sqlExpression": "SUM(transaction_count)", "label": "Transactions"},
        "header_font_size": 0.4,
        "subheader_font_size": 0.15,
        "y_axis_format": ",.0f"
      }
    },
    {
      "slice_name": "Total Revenue",
      "viz_type": "big_number_total",
      "description": "Total revenue in PHP",
      "params": {
        "datasource": "analytics.vw_daily_transactions",
        "metric": {"expressionType": "SQL", "sqlExpression": "SUM(total_revenue)", "label": "Revenue"},
        "header_font_size": 0.4,
        "subheader_font_size": 0.15,
        "y_axis_format": "$,.2f"
      }
    },
    {
      "slice_name": "Active Stores",
      "viz_type": "big_number_total",
      "description": "Number of active stores",
      "params": {
        "datasource": "analytics.vw_store_performance",
        "metric": {"expressionType": "SQL", "sqlExpression": "COUNT(DISTINCT store_id)", "label": "Stores"},
        "header_font_size": 0.4,
        "subheader_font_size": 0.15,
        "y_axis_format": ",.0f"
      }
    },
    {
      "slice_name": "Active Brands",
      "viz_type": "big_number_total",
      "description": "Number of active brands",
      "params": {
        "datasource": "analytics.vw_brand_performance",
        "metric": {"expressionType": "SQL", "sqlExpression": "COUNT(DISTINCT brand_id)", "label": "Brands"},
        "header_font_size": 0.4,
        "subheader_font_size": 0.15,
        "y_axis_format": ",.0f"
      }
    },
    {
      "slice_name": "Revenue Trend",
      "viz_type": "echarts_timeseries_line",
      "description": "Daily revenue trend over time",
      "params": {
        "datasource": "analytics.vw_daily_transactions",
        "x_axis": "transaction_date",
        "time_grain_sqla": "P1D",
        "metrics": [
          {"expressionType": "SQL", "sqlExpression": "SUM(total_revenue)", "label": "Revenue"},
          {"expressionType": "SQL", "sqlExpression": "SUM(transaction_count)", "label": "Transactions"}
        ],
        "groupby": [],
        "row_limit": 10000,
        "show_legend": true,
        "legendType": "scroll",
        "legendOrientation": "top",
        "x_axis_time_format": "%Y-%m-%d",
        "y_axis_format": "$,.0f",
        "rich_tooltip": true,
        "tooltipTimeFormat": "%Y-%m-%d"
      }
    },
    {
      "slice_name": "Stores by Region",
      "viz_type": "echarts_bar",
      "description": "Store distribution and revenue by region",
      "params": {
        "datasource": "analytics.vw_store_performance",
        "metrics": [
          {"expressionType": "SQL", "sqlExpression": "SUM(total_revenue)", "label": "Revenue"}
        ],
        "groupby": ["region"],
        "columns": [],
        "row_limit": 20,
        "order_desc": true,
        "show_legend": true,
        "rich_tooltip": true,
        "y_axis_format": "$,.0f",
        "bar_stacked": false,
        "orientation": "horizontal"
      }
    },
    {
      "slice_name": "Brand Performance",
      "viz_type": "echarts_bar",
      "description": "Top brands by revenue with TBWA client indicator",
      "params": {
        "datasource": "analytics.vw_brand_performance",
        "metrics": [
          {"expressionType": "SQL", "sqlExpression": "SUM(total_revenue)", "label": "Revenue"}
        ],
        "groupby": ["brand_name"],
        "columns": ["is_tbwa_client"],
        "row_limit": 15,
        "order_desc": true,
        "show_legend": true,
        "rich_tooltip": true,
        "y_axis_format": "$,.0f",
        "bar_stacked": true
      }
    },
    {
      "slice_name": "Brand Hierarchy",
      "viz_type": "treemap_v2",
      "description": "Brand revenue distribution by tier and client status",
      "params": {
        "datasource": "analytics.vw_brand_performance",
        "metrics": [
          {"expressionType": "SQL", "sqlExpression": "SUM(total_revenue)", "label": "Revenue"}
        ],
        "groupby": ["brand_tier", "brand_name"],
        "row_limit": 50,
        "show_labels": true,
        "show_upper_labels": true,
        "number_format": "$,.0f"
      }
    }
  ]
}
